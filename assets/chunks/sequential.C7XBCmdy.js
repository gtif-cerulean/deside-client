var fn=Object.defineProperty;var Yt=t=>{throw TypeError(t)};var ln=(t,e,n)=>e in t?fn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ut=(t,e,n)=>ln(t,typeof e!="symbol"?e+"":e,n),jt=(t,e,n)=>e.has(t)||Yt("Cannot "+n);var j=(t,e,n)=>(jt(t,e,"read from private field"),n?n.call(t):e.get(t)),Et=(t,e,n)=>e.has(t)?Yt("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Wt=(t,e,n,r)=>(jt(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ct=(t,e,n)=>(jt(t,e,"access private method"),n);import{r as cn,x as hn}from"./lit-element.Cu4xVypU.js";import{A as je,J as Z,E as dn,S as pn,i as Qt}from"./index.BlmzfcAG.js";import{s as gn}from"./all.style.BXiFe-7i.js";function mn(t,e){Object.keys(e).forEach(n=>{t.setAttribute(n,e[n])})}class bn extends je{register(){super.register()}unregister(){super.unregister()}build(){const e=this.schema.properties,n=this.options,r=this.schema.description,i=this.theme,o=this.defaults.startVals[this.key];n.compact||(this.header=this.label=i.getFormInputLabel(this.getTitle(),this.isRequired())),r&&(this.description=i.getFormInputDescription(this.translateProperty(r))),n.infoText&&(this.infoButton=i.getInfoButton(this.translateProperty(n.infoText)));const a=document.createElement("tc-range-slider"),s=Object.keys(e).find(c=>c.includes("min")),f=Object.keys(e).find(c=>c.includes("max")),u={min:e[s].minimum,max:e[f].maximum,value1:(o==null?void 0:o[s])||e[s].default,value2:(o==null?void 0:o[f])||e[f].default,"slider-bg-fill":"#004170","generate-labels":"true","slider-width":"100%","range-dragging":"false"};mn(a,u),this.input=a,this.input.id=this.formname,this.control=i.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0),this.input.addEventListener("change",c=>{c.preventDefault(),c.stopPropagation(),this.value={[s]:c.detail.value1,[f]:c.detail.value2},this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&this.input.parentNode.removeChild(this.input),super.destroy()}}const st=t=>["feature","features"].some(e=>(t==null?void 0:t.format)===e),ut=t=>["polygon","polygons"].includes(t==null?void 0:t.format),ft=t=>["point","points"].includes(t==null?void 0:t.format),lt=t=>["bounding-boxes","bounding-box"].includes(t==null?void 0:t.format),ct=t=>["lines","line"].includes(t==null?void 0:t.format),Rt=t=>(t==null?void 0:t.type)==="wkt",Lt=t=>(t==null?void 0:t.type)==="geojson",I=t=>["bounding-boxes","polygons","features","points","lines"].includes(t==null?void 0:t.format),yn=t=>st(t)||ut(t)||lt(t)||ft(t)||ct(t);function te(t,e){Object.keys(e).forEach(n=>{t.setAttribute(n,e[n])})}const xn=(t,e)=>{if(!t||!e)return!1;switch(e){case"string":return typeof t=="string";case"number":return!isNaN(t);case"boolean":return typeof t=="boolean";case"array":return Array.isArray(t);case"object":return typeof t=="object"&&!!Object.keys(t).length}return!1};class g extends je{register(){super.register()}unregister(){super.unregister()}build(){var l,h,y,m;const e=this.options,n=this.schema.description,r=this.theme;e.compact||(this.header=this.label=r.getFormInputLabel(this.getTitle(),this.isRequired())),n&&(this.description=r.getFormInputDescription(this.translateProperty(n))),e.infoText&&(this.infoButton=r.getInfoButton(this.translateProperty(e.infoText)));const i=document.createElement("eox-drawtools");let o;switch(!0){case ut(this.schema):o="Polygon";break;case lt(this.schema):o="Box";break;case ft(this.schema):o="Point";break;case ct(this.schema):o="LineString";break;default:o="Box";break}let a;switch(!0){case Rt(this.schema):a="wkt";break;case Lt(this.schema):a="geojson";break;default:a="feature";break}const s={type:o,format:a};if((h=(l=this.schema)==null?void 0:l.options)!=null&&h.projection&&(s.projection=this.schema.options.projection),st(this.schema)&&(s["layer-id"]=this.schema.options.layerId),I(this.schema)&&(s["multiple-features"]=!0,s["show-list"]=!0),"for"in(this.schema.options??{}))s.for=this.options.for;else{const d=document.createElement("eox-map");d.projection="EPSG:4326";const x="map-"+this.formname.replace(/[^\w\s]/gi,"");d.layers=[{type:"Tile",source:{type:"OSM"}}],te(d,{id:x,style:"width: 100%; height: 300px;"}),this.container.appendChild(d),i.for=d}te(i,s),e.autoStartSelection!==!1&&i.updateComplete.then(()=>{i.startDrawing()}),this.input=i,this.input.id=this.formname,this.control=r.getFormControl(this.label,this.input,this.description,this.infoButton),(this.schema.readOnly||this.schema.readonly)&&(this.disable(!0),this.input.disabled=!0);const u=(m=(y=this.schema)==null?void 0:y.options)==null?void 0:m.featureProperty,c=(d,x)=>d.length?!I(this.schema)&&d.length===1?x(d[0]):d.map(x):x(d);this.input.addEventListener("drawupdate",d=>{var x;switch(d.preventDefault(),d.stopPropagation(),!0){case!d.detail:{this.value=null;break}case Rt(this.schema):{this.value=d.detail;break}case Lt(this.schema):{const b=d.detail;if(I(this.schema)){this.value=b;break}this.value=((x=b.features)==null?void 0:x[0])??null;break}case ct(this.schema):{this.value=c(d.detail,b=>b.getGeometry().getCoordinates());break}case st(this.schema):{if(!d.detail.length){this.value=null;break}const b=M=>u?M.get(u)??M:M;this.value=c(d.detail,b);break}case lt(this.schema):{if(!d.detail.length){this.value=null;break}const b=M=>M.getGeometry().getExtent();this.value=c(d.detail,b);break}case ut(this.schema):{if(!d.detail.length){this.value=null;break}this.value=c(d.detail,b=>b);break}case ft(this.schema):{if(!d.detail.length){this.value=null;break}this.value=c(d.detail,b=>{var M;return(M=b.getGeometry())==null?void 0:M.getCoordinates()});break}}this.onChange(!0)}),this.container.appendChild(this.control)}destroy(){this.label&&this.label.parentNode&&this.label.parentNode.removeChild(this.label),this.description&&this.description.parentNode&&this.description.parentNode.removeChild(this.description),this.input&&this.input.parentNode&&(this.input.parentNode.removeChild(this.input),this.input.discardDrawing(),this.input.remove()),super.destroy()}}function wn(t){return function(e,n,r){let i=[];return e.properties&&Object.keys(e.properties).forEach(o=>{const a=e.properties[o];if(!(yn(a)&&(a.format==="feature"||t.some(u=>u.format===a.format&&u.type===a.type))))return;const f=jn(o,n[o],r);if(f.length){i.push(...f);return}switch(!0){case Rt(a):{i.push(...En(o,n[o],r));break}case Lt(a):{i.push(...Cn(o,n[o],r,a));break}case st(a):{i.push(...G({key:o,subValue:n[o],subSchema:a,path:r,validationFn:Mn}));break}case lt(a):{i.push(...G({key:o,subValue:n[o],subSchema:a,path:r,validationFn:vn}));break}case ut(a):{i.push(...G({key:o,subValue:n[o],subSchema:a,path:r,validationFn:kn}));break}case ft(a):{i.push(...G({key:o,subValue:n[o],subSchema:a,path:r,validationFn:$n}));break}case ct(a):{i.push(...G({key:o,subValue:n[o],subSchema:a,path:r,validationFn:Nn}));break}}}),i}}function G({key:t,subValue:e,path:n,subSchema:r,validationFn:i}){if(I(r)){if(Array.isArray(e)){if(!e.length)return[{path:`${n}.${t}`,message:"Value is expected to have at least one value",property:"format"}]}else return[{path:`${n}.${t}`,message:`Value is expected to be an array but got typeof ${typeof e}`,property:"format"}];return e==null?void 0:e.flatMap((o,a)=>i(`${t}.${a}`,o,n,r))}else return i(t,e,n,r)}function vn(t,e,n){const r=[];return e.length!==4?[{path:`${n}.${t}`,message:`Value is expected to have 4 items but got ${e.length}`,property:"format"}]:(e.forEach((i,o)=>{typeof i!="number"&&r.push({path:`${n}.${t}.${o}`,message:`extent is expected to be of type number but got ${i}`,property:"format"})}),r)}function Mn(t,e,n,r){var o;let i;return I(r)?i=(o=r==null?void 0:r.items)==null?void 0:o.type:i=r.type,i?xn(e,i)?[]:[{path:`${n}.${t}`,message:`Value is expected to be a valid ${i}`,property:"format"}]:[]}function kn(t,e,n){return typeof e!="object"||!Object.keys(e).length?[{path:`${n}.${t}`,message:"Value was expected to be a feature object ",property:"format"}]:[]}function $n(t,e,n){const r=[];return e.length!==2?[{path:`${n}.${t}`,message:`Value is expected to have 2 items but got ${e.length}`,property:"format"}]:(e.forEach((i,o)=>{typeof i!="number"&&r.push({path:`${n}.${t}.${o}`,message:`coordinates is expected to be of type number but got ${i}`,property:"format"})}),r)}function Nn(t,e,n){const r=[];return e.length<2?[{path:`${n}.${t}`,message:`Value is expected to have at least 2 points but got ${e.length}`,property:"format"}]:(e.forEach((i,o)=>{i.forEach((a,s)=>{typeof a!="number"&&r.push({path:`${n}.${t}.${o}.${s}`,message:`coordinates is expected to be of type number but got ${a}`,property:"format"})})}),r)}function jn(t,e,n){return e?[]:[{path:`${n}.${t}`,message:`invalid value ${JSON.stringify(e)}`,property:"type"}]}function En(t,e,n){return typeof e!="string"?[{path:`${n}.${t}`,message:"Value is expected to be a valid wkt string",property:"type"}]:e==="GEOMETRYCOLLECTION EMPTY"?[{path:`${n}.${t}`,message:"Should have at least 1 Geometry",property:"type"}]:[]}function Cn(t,e,n,r){var i;if(typeof e!="object"||!Object.keys(e).length)return[{path:`${n}.${t}`,message:"Value is expected to be a valid geojson object",property:"type"}];if(I(r)){if(e.type!=="FeatureCollection")return[{path:`${n}.${t}`,message:"Value is expected to be a valid FeaturesCollection geojson",property:"type"}];if(!((i=e==null?void 0:e.features)!=null&&i.length))return[{path:`${n}.${t}`,message:"Value is expected to have at least one feature",property:"type"}]}else if(!(e!=null&&e.geometry.type))return[{path:`${n}.${t}`,message:"Value is expected to have a valid geometry",property:"type"}];return[]}const ee=[{type:"object",format:"minmax",func:bn},{type:"array",format:"bounding-boxes",func:g},{type:"wkt",format:"bounding-boxes",func:g},{type:"geojson",format:"bounding-boxes",func:g},{type:"array",format:"bounding-box",func:g},{type:"wkt",format:"bounding-box",func:g},{type:"geojson",format:"bounding-box",func:g},{type:"array",format:"polygons",func:g},{type:"wkt",format:"polygons",func:g},{type:"geojson",format:"polygons",func:g},{type:"object",format:"polygon",func:g},{type:"wkt",format:"polygon",func:g},{type:"geojson",format:"polygon",func:g},{type:"array",format:"points",func:g},{type:"wkt",format:"points",func:g},{type:"geojson",format:"points",func:g},{type:"array",format:"point",func:g},{type:"wkt",format:"point",func:g},{type:"geojson",format:"point",func:g},{format:"feature",func:g},{type:"array",format:"features",func:g},{type:"wkt",format:"features",func:g},{type:"geojson",format:"features",func:g},{type:"array",format:"line",func:g},{type:"wkt",format:"line",func:g},{type:"geojson",format:"line",func:g},{type:"array",format:"lines",func:g},{type:"wkt",format:"lines",func:g},{type:"geojson",format:"lines",func:g}],An=t=>{Z.defaults.custom_validators.push(wn(ee)),ee.map(({type:e,format:n,func:r})=>{Z.defaults.startVals=t,Z.defaults.editors[n]=r,Z.defaults.resolvers.unshift(i=>{if(i.type===e&&i.format===n||i.format==="feature")return n})})};window.SimpleMDE=dn;const Hn=t=>{An(t.value||{});const e=t.renderRoot.querySelector("form");let r=new Z(e,{schema:t.schema,...t.value?{startval:t.value}:{},theme:"html",ajax:!0,...t.options});return r.on("ready",()=>{if(Object.values(r.editors).some(i=>i instanceof pn)){const i=document.createElement("style");i.innerHTML=`
          @import url("https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css");
          @import url("https://unpkg.com/easymde/dist/easymde.min.css");
        `,t.renderRoot.insertBefore(i,t.renderRoot.firstChild)}}),r};async function ne(t){if(t&&typeof t!="object")try{const e=await fetch(t);if(e.ok)return await e.json();console.error("Failed to fetch schema from URL: ",e.status)}catch(e){console.error("Error fetching schema: ",e)}return t}const Sn=`
  * {
    font-family: Roboto, sans-serif;
  }
`,Pn=`
  :host, :root {
    --background-color: var(--eox-background-color, transparent);
    background-color: var(--background-color, transparent);
  }
  form {
    background-color: var(--background-color, transparent);
  }
  .CodeMirror {
    background-color: var(--background-color, transparent);
  }
  select {
    background-color: var(--background-color);
  }
  [data-schemaid=root] > .je-header {
    display: none;
  }
  .je-range-control {
    padding: 0.5rem 0;
  }
  .errmsg {
    font-size: x-small;
  }
  tc-range-slider{
    display: block;
    margin: 0.5rem 0;
  }
  .je-header {
    display: flex;
    align-items: center;
    border-bottom: 1px solid #0002;
    padding: 0.5rem 0;
  }
  .je-range-control {
    display: flex;
    align-items: center;
  }
  .je-indented-panel span {
    display: flex;
    align-items: center;
  }
  .je-header span:first-of-type, form[data-theme="html"] .je-form-input-label {
    font-size: 14px;
    font-weight: 600;
  }
  form[data-theme="html"] .je-indented-panel {
    border: none !important;
    margin: 0.4rem;
  }
  button[class*="json-editor-btntype-"] span {
    display: none;
  }
  button[class*="json-editor-btntype-"]::before {
    height: 24px;
    width: 24px;
  }
  button[class*="json-editor-btntype-"] {
    text-indent: 0px;
    margin: 0px;
    display: flex;
  }
  .json-editor-btntype-toggle::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%230009' viewBox='0 0 24 24'%3E%3Ctitle%3Echevron-right%3C/title%3E%3Cpath d='M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M3 21V17H10.5C12.43 17 14 15.43 14 13.5V11H10L16 4L22 11H18V13.5C18 17.64 14.64 21 10.5 21H3Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-movedown::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M21 3V7H13.5C11.57 7 10 8.57 10 10.5V13H14L8 20L2 13H6V10.5C6 6.36 9.36 3 13.5 3H21Z' /%3E%3C/svg%3E");
  }
  .json-editor-btn-moveup,
  .json-editor-btn-movedown,
  .json-editor-btn-moveup::before, 
  .json-editor-btn-movedown::before {
    width: 18px !important;
    height: 18px !important;
  }
  .json-editor-btntype-add::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M20 14H14V20H10V14H4V10H10V4H14V10H20V14Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-delete::before {
    content: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23204270' d='M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z' /%3E%3C/svg%3E");
  }
  .json-editor-btntype-add::before,
   .json-editor-btntype-delete::before {
    width: 16px !important;
    height: 16px !important;
    background: #00417044;
    padding: 4px;
    border-radius: 100px;
  }
  .json-editor-btntype-add,
  .json-editor-btntype-delete {
    opacity: 0.8;
    margin: 0px 0.5rem !important;
  }
  .json-editor-btntype-add:hover,
   .json-editor-btntype-delete:hover {
    opacity: 1;
  }
  button[class*="json-editor-btntype-"]:active {
    --primary-color: transparent;
  }
  .je-indented-panel .row {
    margin-top: 10px;
  }
  .je-object__controls {
    margin: 0 !important;
  }
  .EasyMDEContainer span {
    display: unset;
  }
  .editor-toolbar button {
    box-shadow: none;
    color: #2c3e50 !important;
  }
  .editor-toolbar button:hover:not([disabled]):not(.icon),
  .editor-toolbar button:hover:not([disabled]):not(.icon) {
    box-shadow: none;
    background: #fcfcfc;
    border-color: #95a5a6;
  }
  .editor-toolbar button i {
    font-size: 17px;
  }
  .cm-header-1 {
    font-size: 200% !important;
  }
  .cm-header-1 {
    font-size: 200% !important;
    line-height: 200% !important;
  }
  .cm-header-2 {
    font-size: 160% !important;
    line-height: 160% !important;
  }
  .cm-header-3 {
    font-size: 125% !important;
    line-height: 125% !important;
  }
  .cm-header-4 {
    font-size: 110% !important;
    line-height: 110% !important;
  }
  .cm-comment {
    background: rgba(0, 0, 0, 0.05) !important;
    border-radius: 2px !important;
  }
`;var v,D,Ce,Ae;class Ee extends cn{constructor(){super();Et(this,D);Et(this,v,null);this.schema=null,this.value=null,this.options={show_opt_in:!1,disable_collapse:!0,disable_edit_json:!0,disable_properties:!0,disable_array_delete_all_rows:!0,disable_array_delete_last_row:!0,array_controls_top:!0},this.noShadow=!1,this.unstyled=!1}get editor(){return j(this,v)}get schema(){return this._schema}set schema(n){j(this,v)&&!Qt(this._schema,n)&&j(this,v).destroy(),this._schema=n}get value(){return this._value}set value(n){j(this,v)&&j(this,v).ready&&!Qt(this._value,n)&&j(this,v).setValue(n),this._value=n}async updated(n){this._value=await ne(this.value),n.has("schema")&&(this._schema=await ne(this.schema),(!j(this,v)||j(this,v).destroyed)&&(Wt(this,v,await Hn(this)),Ct(this,D,Ae).call(this)))}createRenderRoot(){return this.noShadow?this:super.createRenderRoot()}render(){return hn`
      <style>
        ${Sn}
        ${!this.unstyled&&gn}
        ${!this.unstyled&&Pn}
      </style>
      <form></form>
    `}}v=new WeakMap,D=new WeakSet,Ce=function(){this.dispatchEvent(new CustomEvent("change",{detail:this.value,bubbles:!0,composed:!0}))},Ae=function(){["ready","change"].map(r=>{j(this,v).on(r,()=>{this._value=j(this,v).getValue(),Ct(this,D,Ce).call(this)})})},Ut(Ee,"properties",{schema:{attribute:!1,type:Object},value:{attribute:!1,type:Object},options:{attribute:!1,type:Object},noShadow:{attribute:"no-shadow",type:Boolean},unstyled:{type:Boolean}});customElements.define("eox-jsonform",Ee);function at(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vn(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function He(t){let e,n,r;t.length!==2?(e=at,n=(s,f)=>at(t(s),f),r=(s,f)=>t(s)-f):(e=t===at||t===Vn?t:_n,n=t,r=t);function i(s,f,u=0,c=s.length){if(u<c){if(e(f,f)!==0)return c;do{const l=u+c>>>1;n(s[l],f)<0?u=l+1:c=l}while(u<c)}return u}function o(s,f,u=0,c=s.length){if(u<c){if(e(f,f)!==0)return c;do{const l=u+c>>>1;n(s[l],f)<=0?u=l+1:c=l}while(u<c)}return u}function a(s,f,u=0,c=s.length){const l=i(s,f,u,c-1);return l>u&&r(s[l-1],f)>-r(s[l],f)?l-1:l}return{left:i,center:a,right:o}}function _n(){return 0}function Rn(t){return t===null?NaN:+t}function*Ur(t,e){if(e===void 0)for(let n of t)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of t)(r=e(r,++n,t))!=null&&(r=+r)>=r&&(yield r)}}const Se=He(at),Tt=Se.right,Wr=Se.left;He(Rn).center;class re extends Map{constructor(e,n=_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(Ot(this,e))}has(e){return super.has(Ot(this,e))}set(e,n){return super.set(Pe(this,e),n)}delete(e){return super.delete(Ve(this,e))}}class Qr extends Set{constructor(e,n=_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const r of e)this.add(r)}has(e){return super.has(Ot(this,e))}add(e){return super.add(Pe(this,e))}delete(e){return super.delete(Ve(this,e))}}function Ot({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Pe({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Ve({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function _e(t){return t!==null&&typeof t=="object"?t.valueOf():t}const Ln=Math.sqrt(50),On=Math.sqrt(10),qn=Math.sqrt(2);function ht(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Ln?10:o>=On?5:o>=qn?2:1;let s,f,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(t*u),f=Math.round(e*u),s/u<t&&++s,f/u>e&&--f,u=-u):(u=Math.pow(10,i)*a,s=Math.round(t/u),f=Math.round(e/u),s*u<t&&++s,f*u>e&&--f),f<s&&.5<=n&&n<2?ht(t,e,n*2):[s,f,u]}function qt(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,o,a]=r?ht(e,t,n):ht(t,e,n);if(!(o>=i))return[];const s=o-i+1,f=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)f[u]=(o-u)/-a;else for(let u=0;u<s;++u)f[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)f[u]=(i+u)/-a;else for(let u=0;u<s;++u)f[u]=(i+u)*a;return f}function It(t,e,n){return e=+e,t=+t,n=+n,ht(t,e,n)[2]}function In(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?It(e,t,n):It(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function L(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function xt(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const ie=Symbol("implicit");function zn(){var t=new re,e=[],n=[],r=ie;function i(o){let a=t.get(o);if(a===void 0){if(r!==ie)return r;t.set(o,a=e.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new re;for(const a of o)t.has(a)||t.set(a,e.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return zn(e,n).unknown(r)},L.apply(i,arguments),i}function U(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function wt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function O(){}var J=.7,dt=1/J,z="\\s*([+-]?\\d+)\\s*",K="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",C="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bn=/^#([0-9a-f]{3,8})$/,Fn=new RegExp(`^rgb\\(${z},${z},${z}\\)$`),Tn=new RegExp(`^rgb\\(${C},${C},${C}\\)$`),Dn=new RegExp(`^rgba\\(${z},${z},${z},${K}\\)$`),Gn=new RegExp(`^rgba\\(${C},${C},${C},${K}\\)$`),Zn=new RegExp(`^hsl\\(${K},${C},${C}\\)$`),Jn=new RegExp(`^hsla\\(${K},${C},${C},${K}\\)$`),oe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};U(O,X,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ae,formatHex:ae,formatHex8:Kn,formatHsl:Xn,formatRgb:se,toString:se});function ae(){return this.rgb().formatHex()}function Kn(){return this.rgb().formatHex8()}function Xn(){return Le(this).formatHsl()}function se(){return this.rgb().formatRgb()}function X(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Bn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?ue(e):n===3?new w(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rt(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rt(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Fn.exec(t))?new w(e[1],e[2],e[3],1):(e=Tn.exec(t))?new w(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Dn.exec(t))?rt(e[1],e[2],e[3],e[4]):(e=Gn.exec(t))?rt(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Zn.exec(t))?ce(e[1],e[2]/100,e[3]/100,1):(e=Jn.exec(t))?ce(e[1],e[2]/100,e[3]/100,e[4]):oe.hasOwnProperty(t)?ue(oe[t]):t==="transparent"?new w(NaN,NaN,NaN,0):null}function ue(t){return new w(t>>16&255,t>>8&255,t&255,1)}function rt(t,e,n,r){return r<=0&&(t=e=n=NaN),new w(t,e,n,r)}function Re(t){return t instanceof O||(t=X(t)),t?(t=t.rgb(),new w(t.r,t.g,t.b,t.opacity)):new w}function pt(t,e,n,r){return arguments.length===1?Re(t):new w(t,e,n,r??1)}function w(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}U(w,pt,wt(O,{brighter(t){return t=t==null?dt:Math.pow(dt,t),new w(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?J:Math.pow(J,t),new w(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new w(R(this.r),R(this.g),R(this.b),gt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fe,formatHex:fe,formatHex8:Yn,formatRgb:le,toString:le}));function fe(){return`#${_(this.r)}${_(this.g)}${_(this.b)}`}function Yn(){return`#${_(this.r)}${_(this.g)}${_(this.b)}${_((isNaN(this.opacity)?1:this.opacity)*255)}`}function le(){const t=gt(this.opacity);return`${t===1?"rgb(":"rgba("}${R(this.r)}, ${R(this.g)}, ${R(this.b)}${t===1?")":`, ${t})`}`}function gt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function R(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _(t){return t=R(t),(t<16?"0":"")+t.toString(16)}function ce(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new E(t,e,n,r)}function Le(t){if(t instanceof E)return new E(t.h,t.s,t.l,t.opacity);if(t instanceof O||(t=X(t)),!t)return new E;if(t instanceof E)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,f=(o+i)/2;return s?(e===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-e)/s+2:a=(e-n)/s+4,s/=f<.5?o+i:2-o-i,a*=60):s=f>0&&f<1?0:a,new E(a,s,f,t.opacity)}function Un(t,e,n,r){return arguments.length===1?Le(t):new E(t,e,n,r??1)}function E(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}U(E,Un,wt(O,{brighter(t){return t=t==null?dt:Math.pow(dt,t),new E(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?J:Math.pow(J,t),new E(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new w(At(t>=240?t-240:t+120,i,r),At(t,i,r),At(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new E(he(this.h),it(this.s),it(this.l),gt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=gt(this.opacity);return`${t===1?"hsl(":"hsla("}${he(this.h)}, ${it(this.s)*100}%, ${it(this.l)*100}%${t===1?")":`, ${t})`}`}}));function he(t){return t=(t||0)%360,t<0?t+360:t}function it(t){return Math.max(0,Math.min(1,t||0))}function At(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Wn=Math.PI/180,Qn=180/Math.PI,mt=18,Oe=.96422,qe=1,Ie=.82521,ze=4/29,B=6/29,Be=3*B*B,tr=B*B*B;function Fe(t){if(t instanceof A)return new A(t.l,t.a,t.b,t.opacity);if(t instanceof S)return Te(t);t instanceof w||(t=Re(t));var e=Vt(t.r),n=Vt(t.g),r=Vt(t.b),i=Ht((.2225045*e+.7168786*n+.0606169*r)/qe),o,a;return e===n&&n===r?o=a=i:(o=Ht((.4360747*e+.3850649*n+.1430804*r)/Oe),a=Ht((.0139322*e+.0971045*n+.7141733*r)/Ie)),new A(116*i-16,500*(o-i),200*(i-a),t.opacity)}function er(t,e,n,r){return arguments.length===1?Fe(t):new A(t,e,n,r??1)}function A(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}U(A,er,wt(O,{brighter(t){return new A(this.l+mt*(t??1),this.a,this.b,this.opacity)},darker(t){return new A(this.l-mt*(t??1),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Oe*St(e),t=qe*St(t),n=Ie*St(n),new w(Pt(3.1338561*e-1.6168667*t-.4906146*n),Pt(-.9787684*e+1.9161415*t+.033454*n),Pt(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function Ht(t){return t>tr?Math.pow(t,1/3):t/Be+ze}function St(t){return t>B?t*t*t:Be*(t-ze)}function Pt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Vt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function nr(t){if(t instanceof S)return new S(t.h,t.c,t.l,t.opacity);if(t instanceof A||(t=Fe(t)),t.a===0&&t.b===0)return new S(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Qn;return new S(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function zt(t,e,n,r){return arguments.length===1?nr(t):new S(t,e,n,r??1)}function S(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Te(t){if(isNaN(t.h))return new A(t.l,0,0,t.opacity);var e=t.h*Wn;return new A(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}U(S,zt,wt(O,{brighter(t){return new S(this.h,this.c,this.l+mt*(t??1),this.opacity)},darker(t){return new S(this.h,this.c,this.l-mt*(t??1),this.opacity)},rgb(){return Te(this).rgb()}}));function De(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function rr(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return De((n-r/e)*e,a,i,o,s)}}function ir(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return De((n-r/e)*e,i,o,a,s)}}const vt=t=>()=>t;function Ge(t,e){return function(n){return t+n*e}}function or(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function ar(t,e){var n=e-t;return n?Ge(t,n>180||n<-180?n-360*Math.round(n/360):n):vt(isNaN(t)?e:t)}function sr(t){return(t=+t)==1?F:function(e,n){return n-e?or(e,n,t):vt(isNaN(e)?n:e)}}function F(t,e){var n=e-t;return n?Ge(t,n):vt(isNaN(t)?e:t)}const de=function t(e){var n=sr(e);function r(i,o){var a=n((i=pt(i)).r,(o=pt(o)).r),s=n(i.g,o.g),f=n(i.b,o.b),u=F(i.opacity,o.opacity);return function(c){return i.r=a(c),i.g=s(c),i.b=f(c),i.opacity=u(c),i+""}}return r.gamma=t,r}(1);function Ze(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=pt(e[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=t(r),i=t(i),o=t(o),s.opacity=1,function(f){return s.r=r(f),s.g=i(f),s.b=o(f),s+""}}}var ti=Ze(rr),ei=Ze(ir);function Je(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Ke(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ni(t,e){return(Ke(e)?Je:Xe)(t,e)}function Xe(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=W(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function ur(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function bt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function fr(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=W(t[i],e[i]):r[i]=e[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var Bt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_t=new RegExp(Bt.source,"g");function lr(t){return function(){return t}}function cr(t){return function(e){return t(e)+""}}function hr(t,e){var n=Bt.lastIndex=_t.lastIndex=0,r,i,o,a=-1,s=[],f=[];for(t=t+"",e=e+"";(r=Bt.exec(t))&&(i=_t.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,f.push({i:a,x:bt(r,i)})),n=_t.lastIndex;return n<e.length&&(o=e.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?f[0]?cr(f[0].x):lr(e):(e=f.length,function(u){for(var c=0,l;c<e;++c)s[(l=f[c]).i]=l.x(u);return s.join("")})}function W(t,e){var n=typeof e,r;return e==null||n==="boolean"?vt(e):(n==="number"?bt:n==="string"?(r=X(e))?(e=r,de):hr:e instanceof X?de:e instanceof Date?ur:Ke(e)?Je:Array.isArray(e)?Xe:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?fr:bt)(t,e)}function Ye(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Ue(t){return function(e,n){var r=t((e=zt(e)).h,(n=zt(n)).h),i=F(e.c,n.c),o=F(e.l,n.l),a=F(e.opacity,n.opacity);return function(s){return e.h=r(s),e.c=i(s),e.l=o(s),e.opacity=a(s),e+""}}}const ri=Ue(ar);var ii=Ue(F);function oi(t,e){e===void 0&&(e=t,t=W);for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function dr(t){return function(){return t}}function pr(t){return+t}var pe=[0,1];function N(t){return t}function Ft(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:dr(isNaN(e)?NaN:.5)}function gr(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function mr(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=Ft(i,r),o=n(a,o)):(r=Ft(r,i),o=n(o,a)),function(s){return o(r(s))}}function br(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Ft(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(s){var f=Tt(t,s,1,r)-1;return o[f](i[f](s))}}function Mt(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kt(){var t=pe,e=pe,n=W,r,i,o,a=N,s,f,u;function c(){var h=Math.min(t.length,e.length);return a!==N&&(a=gr(t[0],t[h-1])),s=h>2?br:mr,f=u=null,l}function l(h){return h==null||isNaN(h=+h)?o:(f||(f=s(t.map(r),e,n)))(r(a(h)))}return l.invert=function(h){return a(i((u||(u=s(e,t.map(r),bt)))(h)))},l.domain=function(h){return arguments.length?(t=Array.from(h,pr),c()):t.slice()},l.range=function(h){return arguments.length?(e=Array.from(h),c()):e.slice()},l.rangeRound=function(h){return e=Array.from(h),n=Ye,c()},l.clamp=function(h){return arguments.length?(a=h?!0:N,c()):a!==N},l.interpolate=function(h){return arguments.length?(n=h,c()):n},l.unknown=function(h){return arguments.length?(o=h,l):o},function(h,y){return r=h,i=y,c()}}function yr(){return kt()(N,N)}function xr(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function yt(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function T(t){return t=yt(Math.abs(t)),t?t[1]:NaN}function wr(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],f=0;i>0&&s>0&&(f+s+1>r&&(s=Math.max(1,r-f)),o.push(n.substring(i-=s,i+s)),!((f+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function vr(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Mr=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Y(t){if(!(e=Mr.exec(t)))throw new Error("invalid format: "+t);var e;return new Dt({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Y.prototype=Dt.prototype;function Dt(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Dt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function kr(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var We;function $r(t,e){var n=yt(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(We=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+yt(t,Math.max(0,e+o-1))[0]}function ge(t,e){var n=yt(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const me={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:xr,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ge(t*100,e),r:ge,s:$r,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function be(t){return t}var ye=Array.prototype.map,xe=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Nr(t){var e=t.grouping===void 0||t.thousands===void 0?be:wr(ye.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",o=t.numerals===void 0?be:vr(ye.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",s=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function u(l){l=Y(l);var h=l.fill,y=l.align,m=l.sign,d=l.symbol,x=l.zero,b=l.width,M=l.comma,P=l.precision,Zt=l.trim,k=l.type;k==="n"?(M=!0,k="g"):me[k]||(P===void 0&&(P=12),Zt=!0,k="g"),(x||h==="0"&&y==="=")&&(x=!0,h="0",y="=");var an=d==="$"?n:d==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",sn=d==="$"?r:/[%p]/.test(k)?a:"",Jt=me[k],un=/[defgprs%]/.test(k);P=P===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function Kt(p){var V=an,$=sn,q,Xt,tt;if(k==="c")$=Jt(p)+$,p="";else{p=+p;var et=p<0||1/p<0;if(p=isNaN(p)?f:Jt(Math.abs(p),P),Zt&&(p=kr(p)),et&&+p==0&&m!=="+"&&(et=!1),V=(et?m==="("?m:s:m==="-"||m==="("?"":m)+V,$=(k==="s"?xe[8+We/3]:"")+$+(et&&m==="("?")":""),un){for(q=-1,Xt=p.length;++q<Xt;)if(tt=p.charCodeAt(q),48>tt||tt>57){$=(tt===46?i+p.slice(q+1):p.slice(q))+$,p=p.slice(0,q);break}}}M&&!x&&(p=e(p,1/0));var nt=V.length+p.length+$.length,H=nt<b?new Array(b-nt+1).join(h):"";switch(M&&x&&(p=e(H+p,H.length?b-$.length:1/0),H=""),y){case"<":p=V+p+$+H;break;case"=":p=V+H+p+$;break;case"^":p=H.slice(0,nt=H.length>>1)+V+p+$+H.slice(nt);break;default:p=H+V+p+$;break}return o(p)}return Kt.toString=function(){return l+""},Kt}function c(l,h){var y=u((l=Y(l),l.type="f",l)),m=Math.max(-8,Math.min(8,Math.floor(T(h)/3)))*3,d=Math.pow(10,-m),x=xe[8+m/3];return function(b){return y(d*b)+x}}return{format:u,formatPrefix:c}}var ot,Gt,Qe;jr({thousands:",",grouping:[3],currency:["$",""]});function jr(t){return ot=Nr(t),Gt=ot.format,Qe=ot.formatPrefix,ot}function Er(t){return Math.max(0,-T(Math.abs(t)))}function Cr(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(T(e)/3)))*3-T(Math.abs(t)))}function Ar(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,T(e)-T(t))+1}function Hr(t,e,n,r){var i=In(t,e,n),o;switch(r=Y(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(o=Cr(i,a))&&(r.precision=o),Qe(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=Ar(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=Er(i))&&(r.precision=o-(r.type==="%")*2);break}}return Gt(r)}function Q(t){var e=t.domain;return t.ticks=function(n){var r=e();return qt(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Hr(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],s=r[o],f,u,c=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);c-- >0;){if(u=It(a,s,n),u===f)return r[i]=a,r[o]=s,e(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;f=u}return t},t}function Sr(){var t=yr();return t.copy=function(){return Mt(t,Sr())},L.apply(t,arguments),Q(t)}function Pr(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function we(t){return Math.log(t)}function ve(t){return Math.exp(t)}function Vr(t){return-Math.log(-t)}function _r(t){return-Math.exp(-t)}function Rr(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Lr(t){return t===10?Rr:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Or(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Me(t){return(e,n)=>-t(-e,n)}function tn(t){const e=t(we,ve),n=e.domain;let r=10,i,o;function a(){return i=Or(r),o=Lr(r),n()[0]<0?(i=Me(i),o=Me(o),t(Vr,_r)):t(we,ve),e}return e.base=function(s){return arguments.length?(r=+s,a()):r},e.domain=function(s){return arguments.length?(n(s),a()):n()},e.ticks=s=>{const f=n();let u=f[0],c=f[f.length-1];const l=c<u;l&&([u,c]=[c,u]);let h=i(u),y=i(c),m,d;const x=s==null?10:+s;let b=[];if(!(r%1)&&y-h<x){if(h=Math.floor(h),y=Math.ceil(y),u>0){for(;h<=y;++h)for(m=1;m<r;++m)if(d=h<0?m/o(-h):m*o(h),!(d<u)){if(d>c)break;b.push(d)}}else for(;h<=y;++h)for(m=r-1;m>=1;--m)if(d=h>0?m/o(-h):m*o(h),!(d<u)){if(d>c)break;b.push(d)}b.length*2<x&&(b=qt(u,c,x))}else b=qt(h,y,Math.min(y-h,x)).map(o);return l?b.reverse():b},e.tickFormat=(s,f)=>{if(s==null&&(s=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Y(f)).precision==null&&(f.trim=!0),f=Gt(f)),s===1/0)return f;const u=Math.max(1,r*s/e.ticks().length);return c=>{let l=c/o(Math.round(i(c)));return l*r<r-.5&&(l*=r),l<=u?f(c):""}},e.nice=()=>n(Pr(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),e}function qr(){const t=tn(kt()).domain([1,10]);return t.copy=()=>Mt(t,qr()).base(t.base()),L.apply(t,arguments),t}function ke(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function $e(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function en(t){var e=1,n=t(ke(e),$e(e));return n.constant=function(r){return arguments.length?t(ke(e=+r),$e(e)):e},Q(n)}function Ir(){var t=en(kt());return t.copy=function(){return Mt(t,Ir()).constant(t.constant())},L.apply(t,arguments)}function Ne(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function zr(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Br(t){return t<0?-t*t:t*t}function nn(t){var e=t(N,N),n=1;function r(){return n===1?t(N,N):n===.5?t(zr,Br):t(Ne(n),Ne(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},Q(e)}function rn(){var t=nn(kt());return t.copy=function(){return Mt(t,rn()).exponent(t.exponent())},L.apply(t,arguments),t}function ai(){return rn.apply(null,arguments).exponent(.5)}function Fr(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(f){return f!=null&&f<=f?i[Tt(r,f,0,n)]:o}function s(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*e-(f-n)*t)/(n+1);return a}return a.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,s()):[t,e]},a.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,s()):i.slice()},a.invertExtent=function(f){var u=i.indexOf(f);return u<0?[NaN,NaN]:u<1?[t,r[0]]:u>=n?[r[n-1],e]:[r[u-1],r[u]]},a.unknown=function(f){return arguments.length&&(o=f),a},a.thresholds=function(){return r.slice()},a.copy=function(){return Fr().domain([t,e]).range(i).unknown(o)},L.apply(Q(a),arguments)}function Tr(){var t=[.5],e=[0,1],n,r=1;function i(o){return o!=null&&o<=o?e[Tt(t,o,0,r)]:n}return i.domain=function(o){return arguments.length?(t=Array.from(o),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(o){return arguments.length?(e=Array.from(o),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(o){var a=e.indexOf(o);return[t[a-1],t[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return Tr().domain(t).range(e).unknown(n)},L.apply(i,arguments)}function $t(){var t=0,e=1,n,r,i,o,a=N,s=!1,f;function u(l){return l==null||isNaN(l=+l)?f:a(i===0?.5:(l=(o(l)-n)*i,s?Math.max(0,Math.min(1,l)):l))}u.domain=function(l){return arguments.length?([t,e]=l,n=o(t=+t),r=o(e=+e),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(l){return arguments.length?(s=!!l,u):s},u.interpolator=function(l){return arguments.length?(a=l,u):a};function c(l){return function(h){var y,m;return arguments.length?([y,m]=h,a=l(y,m),u):[a(0),a(1)]}}return u.range=c(W),u.rangeRound=c(Ye),u.unknown=function(l){return arguments.length?(f=l,u):f},function(l){return o=l,n=l(t),r=l(e),i=n===r?0:1/(r-n),u}}function Nt(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Dr(){var t=Q($t()(N));return t.copy=function(){return Nt(t,Dr())},xt.apply(t,arguments)}function Gr(){var t=tn($t()).domain([1,10]);return t.copy=function(){return Nt(t,Gr()).base(t.base())},xt.apply(t,arguments)}function Zr(){var t=en($t());return t.copy=function(){return Nt(t,Zr()).constant(t.constant())},xt.apply(t,arguments)}function on(){var t=nn($t());return t.copy=function(){return Nt(t,on()).exponent(t.exponent())},xt.apply(t,arguments)}function si(){return on.apply(null,arguments).exponent(.5)}export{nn as $,ir as A,ur as B,O as C,ii as D,Je as E,fr as F,de as G,ti as H,Qr as I,ei as J,Ye as K,hr as L,pr as M,Q as N,L as O,Tt as P,He as Q,w as R,In as S,yr as T,Pr as U,Mt as V,N as W,Nt as X,xt as Y,tn as Z,en as _,at as a,Nr as a0,Y as a1,Er as a2,Ar as a3,Cr as a4,Qe as a5,qr as a6,rn as a7,ai as a8,Ir as a9,Gr as aa,on as ab,si as ac,Zr as ad,Hr as ae,ie as af,pt as ag,Wr as ah,zt as ai,I as aj,Rn as b,Wn as c,U as d,wt as e,Gt as f,Qn as g,dt as h,ri as i,J as j,ar as k,Sr as l,bt as m,Ur as n,zn as o,oi as p,Fr as q,Re as r,Dr as s,Tr as t,Un as u,F as v,er as w,W as x,ni as y,rr as z};
