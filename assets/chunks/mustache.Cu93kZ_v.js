import{o as $,F as b,t as U,p as F,P as z,L as D,i as J,f as Q,M as V,h as ee}from"./GeoJSON.agKdh3Y4.js";import{q as v}from"./getElement.D3H5zNCD.js";class te extends ${constructor(){super()}getType(){return"text"}readFeature(e,t){return this.readFeatureFromText(R(e),this.adaptOptions(t))}readFeatureFromText(e,t){return v()}readFeatures(e,t){return this.readFeaturesFromText(R(e),this.adaptOptions(t))}readFeaturesFromText(e,t){return v()}readGeometry(e,t){return this.readGeometryFromText(R(e),this.adaptOptions(t))}readGeometryFromText(e,t){return v()}readProjection(e){return this.readProjectionFromText(R(e))}readProjectionFromText(e){return this.dataProjection}writeFeature(e,t){return this.writeFeatureText(e,this.adaptOptions(t))}writeFeatureText(e,t){return v()}writeFeatures(e,t){return this.writeFeaturesText(e,this.adaptOptions(t))}writeFeaturesText(e,t){return v()}writeGeometry(e,t){return this.writeGeometryText(e,this.adaptOptions(t))}writeGeometryText(e,t){return v()}}function R(s){return typeof s=="string"?s:""}const re={POINT:z,LINESTRING:D,POLYGON:J,MULTIPOINT:Q,MULTILINESTRING:V,MULTIPOLYGON:ee},X="EMPTY",H="Z",W="M",ne="ZM",u={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},se={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class ie{constructor(e){this.wkt=e,this.index_=-1}isAlpha_(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"}isNumeric_(e,t){return t=t!==void 0?t:!1,e>="0"&&e<="9"||e=="."&&!t}isWhiteSpace_(e){return e==" "||e=="	"||e=="\r"||e==`
`}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const e=this.nextChar_(),t=this.index_;let r=e,n;if(e=="(")n=u.LEFT_PAREN;else if(e==",")n=u.COMMA;else if(e==")")n=u.RIGHT_PAREN;else if(this.isNumeric_(e)||e=="-")n=u.NUMBER,r=this.readNumber_();else if(this.isAlpha_(e))n=u.TEXT,r=this.readText_();else{if(this.isWhiteSpace_(e))return this.nextToken();if(e==="")n=u.EOF;else throw new Error("Unexpected character: "+e)}return{position:t,value:r,type:n}}readNumber_(){let e;const t=this.index_;let r=!1,n=!1;do e=="."?r=!0:(e=="e"||e=="E")&&(n=!0),e=this.nextChar_();while(this.isNumeric_(e,r)||!n&&(e=="e"||e=="E")||n&&(e=="-"||e=="+"));return parseFloat(this.wkt.substring(t,this.index_--))}readText_(){let e;const t=this.index_;do e=this.nextChar_();while(this.isAlpha_(e));return this.wkt.substring(t,this.index_--).toUpperCase()}}class oe{constructor(e){this.lexer_=e,this.token_={position:0,type:u.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(e){return this.token_.type==e}match(e){const t=this.isTokenType(e);return t&&this.consume_(),t}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let e="XY";const t=this.token_;if(this.isTokenType(u.TEXT)){const r=t.value;r===H?e="XYZ":r===W?e="XYM":r===ne&&(e="XYZM"),e!=="XY"&&this.consume_()}return e}parseGeometryCollectionText_(){if(this.match(u.LEFT_PAREN)){const e=[];do e.push(this.parseGeometry_());while(this.match(u.COMMA));if(this.match(u.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(u.LEFT_PAREN)){const e=this.parsePoint_();if(this.match(u.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(u.LEFT_PAREN)){const e=this.parsePointList_();if(this.match(u.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(u.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(u.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(u.LEFT_PAREN)){let e;if(this.token_.type==u.LEFT_PAREN?e=this.parsePointTextList_():e=this.parsePointList_(),this.match(u.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(u.LEFT_PAREN)){const e=this.parseLineStringTextList_();if(this.match(u.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(u.LEFT_PAREN)){const e=this.parsePolygonTextList_();if(this.match(u.RIGHT_PAREN))return e}throw new Error(this.formatErrorMessage_())}parsePoint_(){const e=[],t=this.layout_.length;for(let r=0;r<t;++r){const n=this.token_;if(this.match(u.NUMBER))e.push(n.value);else break}if(e.length==t)return e;throw new Error(this.formatErrorMessage_())}parsePointList_(){const e=[this.parsePoint_()];for(;this.match(u.COMMA);)e.push(this.parsePoint_());return e}parsePointTextList_(){const e=[this.parsePointText_()];for(;this.match(u.COMMA);)e.push(this.parsePointText_());return e}parseLineStringTextList_(){const e=[this.parseLineStringText_()];for(;this.match(u.COMMA);)e.push(this.parseLineStringText_());return e}parsePolygonTextList_(){const e=[this.parsePolygonText_()];for(;this.match(u.COMMA);)e.push(this.parsePolygonText_());return e}isEmptyGeometry_(){const e=this.isTokenType(u.TEXT)&&this.token_.value==X;return e&&this.consume_(),e}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const e=this.token_;if(this.match(u.TEXT)){const t=e.value;this.layout_=this.parseGeometryLayout_();const r=this.isEmptyGeometry_();if(t=="GEOMETRYCOLLECTION"){if(r)return new F([]);const o=this.parseGeometryCollectionText_();return new F(o)}const n=re[t];if(!n)throw new Error("Invalid geometry type: "+t);let i;if(r)t=="POINT"?i=[NaN,NaN]:i=[];else switch(t){case"POINT":{i=this.parsePointText_();break}case"LINESTRING":{i=this.parseLineStringText_();break}case"POLYGON":{i=this.parsePolygonText_();break}case"MULTIPOINT":{i=this.parseMultiPointText_();break}case"MULTILINESTRING":{i=this.parseMultiLineStringText_();break}case"MULTIPOLYGON":{i=this.parseMultiPolygonText_();break}}return new n(i,this.layout_)}throw new Error(this.formatErrorMessage_())}}class Ce extends te{constructor(e){super(),e=e||{},this.splitCollection_=e.splitCollection!==void 0?e.splitCollection:!1}parse_(e){const t=new ie(e);return new oe(t).parse()}readFeatureFromText(e,t){const r=this.readGeometryFromText(e,t),n=new b;return n.setGeometry(r),n}readFeaturesFromText(e,t){let r=[];const n=this.readGeometryFromText(e,t);this.splitCollection_&&n.getType()=="GeometryCollection"?r=n.getGeometriesArray():r=[n];const i=[];for(let o=0,h=r.length;o<h;++o){const a=new b;a.setGeometry(r[o]),i.push(a)}return i}readGeometryFromText(e,t){const r=this.parse_(e);return U(r,!1,t)}writeFeatureText(e,t){const r=e.getGeometry();return r?this.writeGeometryText(r,t):""}writeFeaturesText(e,t){if(e.length==1)return this.writeFeatureText(e[0],t);const r=[];for(let i=0,o=e.length;i<o;++i)r.push(e[i].getGeometry());const n=new F(r);return this.writeGeometryText(n,t)}writeGeometryText(e,t){return B(U(e,!0,t))}}function Z(s){const e=s.getCoordinates();return e.length===0?"":e.join(" ")}function ae(s){const e=[],t=s.getPoints();for(let r=0,n=t.length;r<n;++r)e.push("("+Z(t[r])+")");return e.join(",")}function he(s){const e=[],t=s.getGeometries();for(let r=0,n=t.length;r<n;++r)e.push(B(t[r]));return e.join(",")}function I(s){const e=s.getCoordinates(),t=[];for(let r=0,n=e.length;r<n;++r)t.push(e[r].join(" "));return t.join(",")}function ue(s){const e=[],t=s.getLineStrings();for(let r=0,n=t.length;r<n;++r)e.push("("+I(t[r])+")");return e.join(",")}function q(s){const e=[],t=s.getLinearRings();for(let r=0,n=t.length;r<n;++r)e.push("("+I(t[r])+")");return e.join(",")}function ce(s){const e=[],t=s.getPolygons();for(let r=0,n=t.length;r<n;++r)e.push("("+q(t[r])+")");return e.join(",")}function le(s){const e=s.getLayout();let t="";return(e==="XYZ"||e==="XYZM")&&(t+=H),(e==="XYM"||e==="XYZM")&&(t+=W),t}const pe={Point:Z,LineString:I,Polygon:q,MultiPoint:ae,MultiLineString:ue,MultiPolygon:ce,GeometryCollection:he};function B(s){const e=s.getType(),t=pe[e],r=t(s);let n=se[e];if(typeof s.getFlatCoordinates=="function"){const i=le(s);i.length>0&&(n+=" "+i)}return r.length===0?n+" "+X:n+"("+r+")"}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var fe=Object.prototype.toString,x=Array.isArray||function(e){return fe.call(e)==="[object Array]"};function O(s){return typeof s=="function"}function ye(s){return x(s)?"array":typeof s}function C(s){return s.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Y(s,e){return s!=null&&typeof s=="object"&&e in s}function de(s,e){return s!=null&&typeof s!="object"&&s.hasOwnProperty&&s.hasOwnProperty(e)}var Te=RegExp.prototype.test;function ge(s,e){return Te.call(s,e)}var _e=/\S/;function me(s){return!ge(_e,s)}var we={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Ee(s){return String(s).replace(/[&<>"'`=\/]/g,function(t){return we[t]})}var ve=/\s*/,Pe=/\s+/,j=/\s*=/,xe=/\s*\}/,Le=/#|\^|\/|>|\{|&|=|!/;function Me(s,e){if(!s)return[];var t=!1,r=[],n=[],i=[],o=!1,h=!1,a="",c=0;function f(){if(o&&!h)for(;i.length;)delete n[i.pop()];else i=[];o=!1,h=!1}var g,w,S;function A(_){if(typeof _=="string"&&(_=_.split(Pe,2)),!x(_)||_.length!==2)throw new Error("Invalid tags: "+_);g=new RegExp(C(_[0])+"\\s*"),w=new RegExp("\\s*"+C(_[1])),S=new RegExp("\\s*"+C("}"+_[1]))}A(e||T.tags);for(var l=new G(s),m,y,d,L,N,E;!l.eos();){if(m=l.pos,d=l.scanUntil(g),d)for(var k=0,K=d.length;k<K;++k)L=d.charAt(k),me(L)?(i.push(n.length),a+=L):(h=!0,t=!0,a+=" "),n.push(["text",L,m,m+1]),m+=1,L===`
`&&(f(),a="",c=0,t=!1);if(!l.scan(g))break;if(o=!0,y=l.scan(Le)||"name",l.scan(ve),y==="="?(d=l.scanUntil(j),l.scan(j),l.scanUntil(w)):y==="{"?(d=l.scanUntil(S),l.scan(xe),l.scanUntil(w),y="&"):d=l.scanUntil(w),!l.scan(w))throw new Error("Unclosed tag at "+l.pos);if(y==">"?N=[y,d,m,l.pos,a,c,t]:N=[y,d,m,l.pos],c++,n.push(N),y==="#"||y==="^")r.push(N);else if(y==="/"){if(E=r.pop(),!E)throw new Error('Unopened section "'+d+'" at '+m);if(E[1]!==d)throw new Error('Unclosed section "'+E[1]+'" at '+m)}else y==="name"||y==="{"||y==="&"?h=!0:y==="="&&A(d)}if(f(),E=r.pop(),E)throw new Error('Unclosed section "'+E[1]+'" at '+l.pos);return Ne(Ge(n))}function Ge(s){for(var e=[],t,r,n=0,i=s.length;n<i;++n)t=s[n],t&&(t[0]==="text"&&r&&r[0]==="text"?(r[1]+=t[1],r[3]=t[3]):(e.push(t),r=t));return e}function Ne(s){for(var e=[],t=e,r=[],n,i,o=0,h=s.length;o<h;++o)switch(n=s[o],n[0]){case"#":case"^":t.push(n),r.push(n),t=n[4]=[];break;case"/":i=r.pop(),i[5]=n[2],t=r.length>0?r[r.length-1][4]:e;break;default:t.push(n)}return e}function G(s){this.string=s,this.tail=s,this.pos=0}G.prototype.eos=function(){return this.tail===""};G.prototype.scan=function(e){var t=this.tail.match(e);if(!t||t.index!==0)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r};G.prototype.scanUntil=function(e){var t=this.tail.search(e),r;switch(t){case-1:r=this.tail,this.tail="";break;case 0:r="";break;default:r=this.tail.substring(0,t),this.tail=this.tail.substring(t)}return this.pos+=r.length,r};function P(s,e){this.view=s,this.cache={".":this.view},this.parent=e}P.prototype.push=function(e){return new P(e,this)};P.prototype.lookup=function(e){var t=this.cache,r;if(t.hasOwnProperty(e))r=t[e];else{for(var n=this,i,o,h,a=!1;n;){if(e.indexOf(".")>0)for(i=n.view,o=e.split("."),h=0;i!=null&&h<o.length;)h===o.length-1&&(a=Y(i,o[h])||de(i,o[h])),i=i[o[h++]];else i=n.view[e],a=Y(n.view,e);if(a){r=i;break}n=n.parent}t[e]=r}return O(r)&&(r=r.call(this.view)),r};function p(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}p.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()};p.prototype.parse=function(e,t){var r=this.templateCache,n=e+":"+(t||T.tags).join(":"),i=typeof r<"u",o=i?r.get(n):void 0;return o==null&&(o=Me(e,t),i&&r.set(n,o)),o};p.prototype.render=function(e,t,r,n){var i=this.getConfigTags(n),o=this.parse(e,i),h=t instanceof P?t:new P(t,void 0);return this.renderTokens(o,h,r,e,n)};p.prototype.renderTokens=function(e,t,r,n,i){for(var o="",h,a,c,f=0,g=e.length;f<g;++f)c=void 0,h=e[f],a=h[0],a==="#"?c=this.renderSection(h,t,r,n,i):a==="^"?c=this.renderInverted(h,t,r,n,i):a===">"?c=this.renderPartial(h,t,r,i):a==="&"?c=this.unescapedValue(h,t):a==="name"?c=this.escapedValue(h,t,i):a==="text"&&(c=this.rawValue(h)),c!==void 0&&(o+=c);return o};p.prototype.renderSection=function(e,t,r,n,i){var o=this,h="",a=t.lookup(e[1]);function c(w){return o.render(w,t,r,i)}if(a){if(x(a))for(var f=0,g=a.length;f<g;++f)h+=this.renderTokens(e[4],t.push(a[f]),r,n,i);else if(typeof a=="object"||typeof a=="string"||typeof a=="number")h+=this.renderTokens(e[4],t.push(a),r,n,i);else if(O(a)){if(typeof n!="string")throw new Error("Cannot use higher-order sections without the original template");a=a.call(t.view,n.slice(e[3],e[5]),c),a!=null&&(h+=a)}else h+=this.renderTokens(e[4],t,r,n,i);return h}};p.prototype.renderInverted=function(e,t,r,n,i){var o=t.lookup(e[1]);if(!o||x(o)&&o.length===0)return this.renderTokens(e[4],t,r,n,i)};p.prototype.indentPartial=function(e,t,r){for(var n=t.replace(/[^ \t]/g,""),i=e.split(`
`),o=0;o<i.length;o++)i[o].length&&(o>0||!r)&&(i[o]=n+i[o]);return i.join(`
`)};p.prototype.renderPartial=function(e,t,r,n){if(r){var i=this.getConfigTags(n),o=O(r)?r(e[1]):r[e[1]];if(o!=null){var h=e[6],a=e[5],c=e[4],f=o;a==0&&c&&(f=this.indentPartial(o,c,h));var g=this.parse(f,i);return this.renderTokens(g,t,r,f,n)}}};p.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(r!=null)return r};p.prototype.escapedValue=function(e,t,r){var n=this.getConfigEscape(r)||T.escape,i=t.lookup(e[1]);if(i!=null)return typeof i=="number"&&n===T.escape?String(i):n(i)};p.prototype.rawValue=function(e){return e[1]};p.prototype.getConfigTags=function(e){return x(e)?e:e&&typeof e=="object"?e.tags:void 0};p.prototype.getConfigEscape=function(e){if(e&&typeof e=="object"&&!x(e))return e.escape};var T={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(s){M.templateCache=s},get templateCache(){return M.templateCache}},M=new p;T.clearCache=function(){return M.clearCache()};T.parse=function(e,t){return M.parse(e,t)};T.render=function(e,t,r,n){if(typeof e!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+ye(e)+'" was given as the first argument for mustache#render(template, view, partials)');return M.render(e,t,r,n)};T.escape=Ee;T.Scanner=G;T.Context=P;T.Writer=p;export{te as T,Ce as W,T as m};
